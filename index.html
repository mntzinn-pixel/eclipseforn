<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loja</title>

<style>
body{
font-family:Arial;
background:#f5f5f5;
padding:30px;
}

.produto{
background:white;
padding:20px;
margin-bottom:15px;
}

button{
padding:8px 12px;
background:#16a34a;
color:white;
border:none;
cursor:pointer;
}
</style>
</head>
<body>

<h1>Minha Loja</h1>

<div id="lista"></div>

<script>

function carregarProdutos(){
let produtos = JSON.parse(localStorage.getItem("produtos")) || [];

let lista = document.getElementById("lista");
lista.innerHTML = "";

produtos.forEach((p,index)=>{

lista.innerHTML += `
<div class="produto">
<h3>${p.nome}</h3>
<p>R$ ${p.preco}</p>
<p>Estoque: ${p.estoque}</p>
<button onclick="comprar(${index})">Comprar</button>
</div>
`;

});
}

function comprar(index){
let produtos = JSON.parse(localStorage.getItem("produtos"));
let vendas = JSON.parse(localStorage.getItem("vendas")) || [];

if(produtos[index].estoque <= 0){
alert("Sem estoque!");
return;
}

produtos[index].estoque -= 1;

vendas.push({
nome: produtos[index].nome,
valor: produtos[index].preco
});

localStorage.setItem("produtos", JSON.stringify(produtos));
localStorage.setItem("vendas", JSON.stringify(vendas));

alert("Compra realizada!");
carregarProdutos();
}

carregarProdutos();

</script>

</body>
</html>
